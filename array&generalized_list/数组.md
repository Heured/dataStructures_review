## 数组的存储结构

在c/c++语言下:

1. 一旦定义了一个数组，其数据元素数目不再有增减变化。
2. 数组中的数据元素具有相同的数据类型。
3. 数组中每个元素都有唯一下标与其对应。
4. 数组是一种随机存储结构，可随机存取数组中的任意元素。

一维数组a中，一旦确定a1的存储地址LOC(a1)，假设每个元素占用k个存储单元，则任一元素ai存储地址LOC(ai)可由如下公式求得：

​	LOC(ai) = LOC(a1) + (i-1)*k (2<=i<=n)	--式1

以行序为主序的二维数组a中，已知a(1,1)的存储地址LOC(a(1,1))和每个元素占用的存储单元k，该二维数组的任一元素a(i,j)存储地址为:

​	LOC(a(i,j)) = LOC(a(1,1)) + [ (i - 1) x n + (j - 1)] x k	--式2

式中n为列数。

同时以列为主序的二维数组元素存储地址：

​	LOC(a(i,j)) = LOC(a(1,1)) + [ (j - 1) x m + (i - 1)] x k	--式3

式中m为行数。



假设行下界为c1，行上界为d1，列下界为c2，列上界为d2，则式2可改写为：

​	LOC(a(i,j)) = LOC(a(c1,c2)) + [(i - c1) x (d2 - c2 + 1) + (j - c2)] x k	--式4

式3可改写为：

​	LOC(a(i,j)) = LOC(a(c1,c2)) + [(j - c2) x (d1 - c1 + 1) + (i - c1)] x k	--式5



可以看出，对于c/c++数组a [m] [n]，a [i] [j] 元素的地址为:

​	LOC(a[i] [j]) = LOC(a[0] [0]) + (i x n + j) x k	--式6



## 特殊矩阵的压缩存储

### 1. 对称矩阵的压缩存储

​	若一个n阶方阵A [n] [n]中的元素满足 a(i, j) = a(j, i) (0<=i, j<=n-1)，则称其为n阶对称矩阵。在n阶对称矩阵这个前提下，在存储时可以只存储矩阵中由主对角线分割的上三角或者下三角中的元素，使得对称的元素共享一个存储空间。这样就可以将n^2个元素压缩为n(n + 1)/2个元素的空间中。

​	假设用一维数组B[0...n(n+1)/2 - 1]作为n阶对称矩阵A的存储结构，在B中只存储A的下三角元素a(i, j) (i>=j)。假设a(i, j)存储于B[k]元素中(A [i] [j] == A [j] [i] == B[k])。则i, j与k的对应关系为：

​	k = i(i + 1)/2 + j  (i>=j)；k = j(j + 1)/2 + i (i<j)；	--式7

​	有些非对称矩阵也可以使用此方法存储，如n阶下(上)三角矩阵。n阶下三角矩阵表示在主对角线以上的元素均为常数c的n阶方阵，n阶上三角矩阵同理。则i, j与k的对应关系为：

上三角矩阵：k = ni - i(i + 1)/2 + j	(i<=j);	k = n(n + 1)/2	(i>j);

下三角矩阵：k = 1(i - 1)/2 + j	(i>=j)；k = n(n + 1)/2	(i<j);

其中，B[n(n + 1)/2]存放常数c。

### 2. 对角矩阵的压缩存储

​	n阶对角矩阵表示一个n阶方阵A其所有非零元素都集中在以主对角线为中心的带状区域中。若其主对角线上下方各有b条次对角线，则称b为矩阵半带宽，(2b + 1)为矩阵带宽。

​	对于半带宽为b(0<=b<=(n-1)/2)的对角矩阵，|i - j| <= b 的元素a(i, j)不为0，其余元素为0。

​	对于b=1的三对角矩阵A，将其存储到一维数组B中，B[k] == A [i] [j]。A中第0行和第n-1行都只有两个非零元素，其余各行均有3个非零元素。对于不在第0行的非零元素a(i, j)来说，在它面前存储了前i行元素，总数为2 + 3(i - 1)。此时：

​	a(i, j)为该行第一个元素，k = 2 + 3(i - 1) = 3i - 1，此时j = i - 1，所以k = 2i + j

​	a(i, j)为该行第二个元素，k = 2 + 3(i - 1) + 1 = 3i，此时j = i，所以k = 2i + j

​	a(i, j)为该行第三个元素，k = 2 + 3(i - 1) + 2 = 3i + 1，此时j = i + 1，所以k = 2i + j